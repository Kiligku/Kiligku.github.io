---
title: 深度理解万象死锁的现象和成因
date: 2023-12-04 11:56:52
categories:
- 机器人感知
---

# 深度理解万象死锁的现象和成因

万向死锁（gimbal lock）存在于欧拉角表示的旋转中，为了和Craig版的机器人学导论一致，下面只讨论zyx欧拉角的情况（其他形式的欧拉角思路一致）。

## 万向死锁的现象

简单来说，万向死锁表现为当欧拉角设定绕y轴（也就是欧拉角旋转顺序中的第二个轴）旋转90度时，物体在三维空间旋转会失去一个自由度，即无论调整绕x轴还是z轴的旋转角度，最终物体也只会绕**世界坐标中的**一个轴旋转。

## 万向死锁的代数推导

由于zyx欧拉角的表达形式固定，代数推导的过程也十分显然，如下图所示：

![](https://raw.githubusercontent.com/Kiligku/images/master/ddf4c8a1-851b-4582-a2fe-47722276f5dd.png)

## 直观理解

### 1. 理解欧拉角旋转顺序的作用

学习zyx欧拉角时，对它的理解是“先绕z轴旋转$\theta$角度，再绕动系的y轴旋转$\beta$角度...”，这样的理解虽然没有原则性错误，但容易把欧拉角理解成描述旋转“过程”的工具，但其实欧拉角的本质是一个旋转矩阵，描述的是旋转的**结果**，而欧拉角对同一变换的描述方法可能有多个，即存在奇异性，这正是发生死锁的本质原因。

zyx欧拉角对旋转的顺序有严格的要求，即无论之后绕动系y和x轴如何旋转，最开始绕的z轴都是初始的z轴，同样地，无论最后绕x轴如何旋转，之前绕的y轴都是第一步绕z轴旋转后动系的y轴。在物体的旋转中我们可以用一种规则来等效这种旋转顺序的要求：先旋转的轴可以带动后旋转的轴旋转，而后旋转的轴不能带动先旋转的轴旋转。有了这个等效的规则，就可以很好地解释万向死锁发生的原因。

### 2.万向死锁发生的直观理解



<img src="https://raw.githubusercontent.com/Kiligku/images/master/a88c7150-789b-491b-822f-c0d6964c52be.png" width="500">

参考上图的坐标系（这个视频用的是xyz的旋转顺序），当飞机绕x轴旋转一个角度后，此时整个机体坐标系都一起旋转。然后飞机绕机体的y轴旋转，但不带动z轴，旋转y轴90度后机体的x轴与原z轴重合，此时再绕x轴旋转的表现就是绕原有的z轴旋转，并且这两个旋转的方向相反，具体数值可以对应上面的代数推导。